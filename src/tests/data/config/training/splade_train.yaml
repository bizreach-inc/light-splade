# defaults:
#   - training

training_loss: margin_mse
regularizers:
  doc:
    reg_type: FLOPS
    lambda_: 0.08
    T: 50000
  query:
    reg_type: FLOPS
    lambda_: 0.1
    T: 50000

validation_metrics: [ MRR@10, recall@10, recall@100, recall@200, recall@500 ]

# index_retrieve_batch_size: 128
# record_frequency: 5000
# train_monitoring_freq: 500
# max_length: 256
# matching_type: splade
# monitoring_ckpt: MRR@10  # or e.g. MRR@10
# overwrite_final: true

######## From TrainingArguments class ##########
# - Only values which are different from default values are defined here
# - Look at TrainingArguments spec for available arguments
#   - https://huggingface.co/docs/transformers/v4.43.4/en/main_classes/trainer#transformers.TrainingArguments
################################################

# paths
final_output_dir: ../model/dummy_model/final
output_dir: ../model/dummy_model/ckpts
logging_dir: ../tensorboard/dummy_model

logging_steps: 500
save_steps: 5000
save_total_limit: 10
do_eval: true
eval_strategy: steps
eval_steps: 10000
max_steps: 120000
report_to:
  - tensorboard

# scheduler
warmup_steps: 4000

# optimizer
learning_rate: 2e-5
weight_decay: 0.01

# others
seed: 123
gradient_accumulation_steps: 1
per_device_train_batch_size: 4
per_device_eval_batch_size: 12
fp16: false
save_safetensors: false
